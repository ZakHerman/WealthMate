<?xml version="1.0" encoding="utf-8" ?>
<TabbedPage xmlns="http://xamarin.com/schemas/2014/forms"
xmlns:chart="clr-namespace:Syncfusion.SfChart.XForms;assembly=Syncfusion.SfChart.XForms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:d="http://xamarin.com/schemas/2014/forms/design"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
              xmlns:syncfusion="clr-namespace:Syncfusion.ListView.XForms;assembly=Syncfusion.SfListView.XForms"
            xmlns:models="clr-namespace:WealthMate.Models;assembly=WealthMate" 
            mc:Ignorable="d"
             x:Class="WealthMate.Views.PortfolioPage"
             Title="Portfolio">

    <NavigationPage.TitleView>
        <AbsoluteLayout x:Name="NavBarLayout">
            <Image x:Name="NavBarLogo"
                   Source="logo.png"
                   HeightRequest="64"
                   WidthRequest="64" />
            <Label x:Name="NavBarTitle"
                   Text="{Binding TotalValue, StringFormat='{0:C}'}"
                   HorizontalTextAlignment="Center"
                   VerticalTextAlignment="Center"
                   FontAttributes="Bold"
                   TextColor="White"
                   FontSize="20"/>
        </AbsoluteLayout>
    </NavigationPage.TitleView>

    <TabbedPage.Children>
        <ContentPage Title="PieChart">
            <StackLayout>
                <chart:SfChart VerticalOptions="FillAndExpand">

                    <chart:SfChart.Title>
                        <chart:ChartTitle Text="Assets Portfolio Breakdown" TextColor="SeaGreen" TextAlignment="Center" Font="20"/>
                    </chart:SfChart.Title>

                    <chart:SfChart.Series>
                        <chart:PieSeries EnableAnimation="True" ItemsSource="{Binding pieChart}" XBindingPath= "StockName" YBindingPath="Quantity" EnableTooltip="True">
                            <chart:PieSeries.ColorModel>
                                <chart:ChartColorModel Palette="Custom">
                                    <chart:ChartColorModel.CustomBrushes>
                                        <Color>#33BDFF</Color>
                                        <Color>#33A4FF</Color>
                                    </chart:ChartColorModel.CustomBrushes>
                                </chart:ChartColorModel>
                            </chart:PieSeries.ColorModel>
                        </chart:PieSeries>
                    </chart:SfChart.Series>

                    <chart:SfChart.Legend>
                        <chart:ChartLegend x:Name="legend" DockPosition="Bottom" OverflowMode="Wrap">
                            <chart:ChartLegend.ItemTemplate>
                                <DataTemplate>
                                    <StackLayout BackgroundColor="{Binding DataPoint.LegendBackgroundColor}" Padding="3" Orientation="Horizontal" x:Name="root" WidthRequest="143">
                                        <BoxView Color="{Binding IconColor}" HorizontalOptions="Center" VerticalOptions="Center" HeightRequest="13" WidthRequest="13" >
                                            <BoxView.Margin>
                                                <OnPlatform x:TypeArguments="Thickness" WinPhone="0,4,0,0" />
                                            </BoxView.Margin>
                                        </BoxView>
                                        <Label FontSize="13" VerticalTextAlignment="Center" Text="{Binding DataPoint.StockName}" />
                                        <Label FontSize="13" VerticalTextAlignment="Center" Text="{Binding DataPoint.Quantity}" />
                                    </StackLayout>
                                </DataTemplate>
                            </chart:ChartLegend.ItemTemplate>
                        </chart:ChartLegend>
                    </chart:SfChart.Legend>
                </chart:SfChart>
            </StackLayout>
        </ContentPage>

        <ContentPage Title="List">
          <ContentPage.BindingContext>
            <models:OwnedAsset/>
          </ContentPage.BindingContext>

          <syncfusion:SfListView x:Name="OwnedAssetListView" AutoFitMode="None" ItemSize="52" DragStartMode="OnHold">
            <syncfusion:SfListView.ItemTemplate>
          <DataTemplate>
            <Grid Margin="12,0,12,0">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width ="16" />
              </Grid.ColumnDefinitions>

              <Image Grid.Column="0" Source="{Binding Symbol}"/>
              <Label Grid.Column="1" Text ="{Binding SharesPurchased}"/>
              <Label Grid.Column="2" Text ="{Binding PurchasedPrice}"/>
              <Label Grid.Column="3" Text ="Binding CurrentPrice, StringFormat='{0:C}'}"/>
            </Grid>
          </DataTemplate>
            <StackLayout>
                <BoxView Color="DarkRed" VerticalOptions="FillAndExpand"/>
            </StackLayout>
            </syncfusion:SfListView.ItemTemplate>
          </syncfusion:SfListView>
          <syncfusion:SfListView x:Name="OwnedTDListView" AutoFitMode="None" ItemSize="52" DragStartMode="OnHold">
            <syncfusion:SfListView.ItemTemplate>
              <DataTemplate>
                <Grid Margin="12,0,12,0">
                  <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="32" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                  </Grid.ColumnDefinitions>

                  <Image Grid.Column="0" Source="{Binding Logo}"/>
                  <Label Grid.Column="1" Text="{Binding PrincipalValue}" VerticalOptions="Center" FontSize="20" LineBreakMode="TailTruncation" />
                  <Label Grid.Column="2" Text="{Binding InterestRate, StringFormat='{0:F2}%'}" VerticalOptions="Center" HorizontalOptions="Center" FontSize="16" TextColor="ForestGreen"/>
                </Grid>
              </DataTemplate>
            </syncfusion:SfListView.ItemTemplate>
          </syncfusion:SfListView>
        </ContentPage>
    </TabbedPage.Children>
</TabbedPage>


